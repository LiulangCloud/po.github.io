{"version":3,"sources":["components/PostCard/PostCard.jsx","components/HomeCard/HomeCard.jsx","views/Home/Home.jsx","views/Post/Post.jsx","views/Cate/Cate.jsx","components/SearchCard/SearchCard.jsx","views/Search/Search.jsx","views/Me/Me.jsx","App.jsx","reportWebVitals.js","index.js"],"names":["PostCard","ms","item","className","to","postid","style","display","width","src","image","alt","cates","map","cate","index","catename","duration","Math","floor","title","HomeCard","data","special","selection_title","list","Home","useState","indexDate","setIndexDate","imgHeight","setImgHeight","moreData","setMoreData","loadMore","a","lastid","length","posts","window","axios","get","then","res","console","log","finally","useEffect","onScroll","e","x","target","scrollHeight","scrollTop","offsetHeight","Fragment","autoplay","infinite","banner","extra_data","app_banner_param","href","height","verticalAlign","onLoad","dispatchEvent","Event","bannerid","today","hot","album","color","backgroundColor","padding","textAlign","onClick","Post","posid","useParams","id","details","setDetails","content_video","progressive","url","controls","poster","preload","Cate","setCates","icon","SearchCard","getKw","search","recommend_keywords","kw","Search","keyworld","setkeyworld","setSearch","autoFocusInst","useRef","JSON","parse","localStorage","getItem","searchHistory","setSearchHistory","history","useHistory","getSearch","Set","current","focus","result","setItem","stringify","type","size","placeholder","ref","value","onChange","onKeyPress","key","goBack","marginBottom","Me","App","modal","setModal","dayCard","setdayCard","location","useLocation","pathname","match","mode","leftContent","preventDefault","rightContent","exact","path","popup","visible","transparent","position","maskClosable","animationType","paddingTop","content","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","_axios","create","interceptors","request","use","config","Toast","loading","error","Promise","reject","response","hide","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.23859649.chunk.js","sourcesContent":["import React from \"react\";\r\nimport \"../PostCard/PostCard.css\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function PostCard({ item }) {\r\n  function parseTime(ms) {\r\n    return Math.floor(ms / 1000 / 60) + \"'\" + ((ms / 1000) % 60) + '\"';\r\n  }\r\n  return (\r\n    <li className=\"post_card\">\r\n      <Link\r\n        to={`/post/${item.postid}`}\r\n        key={item.postid}\r\n        style={{\r\n          display: \"inline-block\",\r\n          width: \"100%\",\r\n        }}\r\n      >\r\n        <img className=\"thumb\" src={item.image} alt=\"\" />\r\n        <div className=\"info\">\r\n          <div className=\"desc\">\r\n            {item.cates.map((cate, index) => {\r\n              return <span key={index}>{cate.catename}</span>;\r\n            })}\r\n            <span className=\"dus\">{parseTime(item.duration)}</span>\r\n          </div>\r\n          <h5>{item.title}</h5>\r\n        </div>\r\n      </Link>\r\n    </li>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport PostCard from \"../PostCard/PostCard\";\r\nimport \"../HomeCard/HomeCard.css\";\r\n\r\nexport default function HomeCard({ data, special }) {\r\n  return (\r\n    <div className={special ? \"home_card special\" : \"home_card\"}>\r\n      <h3>{data.selection_title}</h3>\r\n      <ul>\r\n        {data.list.map((item, index) => (\r\n          <PostCard key={index} item={item} />\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./Home.css\";\r\nimport { useEffect, useState } from \"react\";\r\n// 引入antd-mobile\r\nimport { Carousel } from \"antd-mobile\";\r\nimport { Link } from \"react-router-dom\";\r\n// import HomeCard from \"../components/HomeCard/HomeCard\";\r\nimport HomeCard from \"../../components/HomeCard/HomeCard\"\r\nexport default function Home() {\r\n  const [indexDate, setIndexDate] = useState(null);\r\n  const [imgHeight, setImgHeight] = useState(203);\r\n  const [moreData, setMoreData] = useState([]);\r\n  // const [moreLoading, setMoreLoading] = useState(false);\r\n  useEffect(() => {\r\n    // 全局axios\r\n    console.log(window);\r\n    window.axios\r\n      .get(\"https://app.vmovier.com/apiv3/index/index\")\r\n      .then((res) => {\r\n        console.log(res.data.data);\r\n        setIndexDate(res.data.data);\r\n      });\r\n  }, []);\r\n\r\n  //加载更多\r\n  async function loadMore() {\r\n    // if (!moreLoading) {\r\n    let lastid;\r\n    if (moreData.length) {\r\n      lastid = moreData[moreData.length - 1].lastid;\r\n    } else {\r\n      lastid = indexDate.posts.lastid;\r\n    }\r\n\r\n    await window.axios\r\n      .get(\"https://app.vmovier.com/apiv3/index/getIndexPosts/lastid/\" + lastid)\r\n      .then((res) => {\r\n        console.log(res.data.data);\r\n        setMoreData([...moreData, res.data.data]);\r\n      })\r\n      .finally(() => {});\r\n    // }\r\n    // setMoreLoading(true);\r\n  }\r\n\r\n  function scrollHandler(e) {\r\n    let x = e.target.scrollHeight - e.target.scrollTop - e.target.offsetHeight;\r\n\r\n    if (Math.floor(x) === 0) {\r\n      if (moreData.length <= 10) {\r\n        loadMore();\r\n      }\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"home\" onScroll={scrollHandler}>\r\n      {indexDate && (\r\n        <React.Fragment>\r\n          <Carousel autoplay={true} infinite>\r\n            {indexDate.banner.list.map((item) => (\r\n              <Link\r\n                to={`/post/${item.extra_data.app_banner_param}`}\r\n                key={item.bannerid}\r\n                href=\"http://www.alipay.com\"\r\n                style={{\r\n                  display: \"inline-block\",\r\n                  width: \"100%\",\r\n                  height: imgHeight,\r\n                }}\r\n              >\r\n                <img\r\n                  src={item.image}\r\n                  alt=\"\"\r\n                  style={{ width: \"100%\", verticalAlign: \"top\" }}\r\n                  onLoad={() => {\r\n                    // fire window resize event to change height\r\n                    window.dispatchEvent(new Event(\"resize\"));\r\n                    setImgHeight(\"auto\");\r\n                  }}\r\n                />\r\n              </Link>\r\n            ))}\r\n          </Carousel>\r\n          {/* 今日 */}\r\n          <HomeCard data={indexDate.today}></HomeCard>\r\n          {/* 热门 */}\r\n          <HomeCard data={indexDate.hot} special={true}></HomeCard>\r\n          {/* 专题 */}\r\n          <HomeCard data={indexDate.album}></HomeCard>\r\n          {/* 更多 */}\r\n          {moreData.map((item, index) => (\r\n            <HomeCard key={index} data={item}></HomeCard>\r\n          ))}\r\n          {moreData.length >= 10 && (\r\n            <div\r\n              style={{\r\n                height: \"20\",\r\n                color: \"white\",\r\n                backgroundColor: \"#252525\",\r\n                padding: \"10px\",\r\n                textAlign: \"center\",\r\n              }}\r\n              onClick={loadMore}\r\n            >\r\n              点击加载更多\r\n            </div>\r\n          )}\r\n        </React.Fragment>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useParams } from \"react-router\";\r\nimport \"./Post.css\";\r\n\r\nexport default function Post() {\r\n  const posid = useParams().id;\r\n  console.log(posid);\r\n  const [details, setDetails] = useState(null);\r\n  useEffect(() => {\r\n    window.axios\r\n      .get(\r\n        \"https://api.kele8.cn/agent/https://app.vmovier.com/apiv3/post/view?postid=\" +\r\n          posid\r\n      )\r\n      .then((res) => {\r\n        console.log(res.data.data);\r\n        setDetails(res.data.data);\r\n        // console.log(details);\r\n      });\r\n  }, [posid]);\r\n  return (\r\n    <div className=\"post\">\r\n      {details && (\r\n        <React.Fragment>\r\n          <video\r\n            src={details.content_video[0].progressive[0].url}\r\n            controls\r\n            poster={details.image}\r\n            preload=\"metadata\"\r\n          ></video>\r\n          <h2>{details.title}</h2>\r\n        </React.Fragment>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport \"./Cate.css\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nexport default function Cate() {\r\n  const [cates, setCates] = useState([]);\r\n  useEffect(() => {\r\n    window.axios\r\n      .get(\r\n        \"https://api.kele8.cn/agent/https://app.vmovier.com/apiv3/cate/getList\"\r\n      )\r\n      .then((res) => {\r\n        console.log(res);\r\n        setCates(res.data.data);\r\n      });\r\n  }, []);\r\n  return (\r\n    <ul className=\"cate\">\r\n      {cates.map((cate, index) => {\r\n        return (\r\n          <li className=\"cate_list\">\r\n            <img src={cate.icon} alt=\"\" />\r\n            <h5>#{cate.catename}#</h5>\r\n          </li>\r\n        );\r\n      })}\r\n    </ul>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { useEffect, useState } from \"react\";\r\nimport \"./SearchCard.css\";\r\nexport default function SearchCard({ getKw, search }) {\r\n  // const [search, setSearch] = useState(null);\r\n  function clickHeandler(kw) {\r\n    getKw(kw);\r\n  }\r\n  // useEffect(() => {\r\n  //   window\r\n  //     .axios(\"https://api.kele8.cn/agent/https://app.vmovier.com/apiv3/search\")\r\n  //     .then((res) => {\r\n  //       console.log(res.data.data);\r\n  //       setSearch(res.data.data);\r\n  //     });\r\n  // }, []);\r\n  return (\r\n    <div className=\"search_card\">\r\n      {search && search.recommend_keywords && (\r\n        <div className=\"search_hot\">\r\n          {search.recommend_keywords.map((item) => (\r\n            <span key={item.id} onClick={() => clickHeandler(item.kw)}>\r\n              {item.kw}\r\n            </span>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n        \r\n     \r\n    </div>\r\n  );\r\n}\r\n","// import React from \"react\";\r\nimport SearchCard from \"../../components/SearchCard/SearchCard\";\r\nimport \"./Search.css\";\r\nimport PostCard from \"../../components/PostCard/PostCard\";\r\nimport { useEffect, useState, useRef } from \"react\";\r\nimport { Icon } from \"antd-mobile\";\r\nimport { useHistory } from \"react-router-dom\";\r\nexport default function Search() {\r\n  //输入框值\r\n  const [keyworld, setkeyworld] = useState(\"\");\r\n  const [search, setSearch] = useState(null);\r\n  const autoFocusInst = useRef(null);\r\n  const [searchHistory, setSearchHistory] = useState(\r\n    JSON.parse(window.localStorage.getItem(\"SHI\")) || []\r\n  );\r\n  //跳转\r\n  let history = useHistory();\r\n  //回车搜索\r\n  function keyPressHandler(e) {\r\n    // console.log(e.key);\r\n    if (e.key === \"Enter\") {\r\n      console.log(\"搜索\");\r\n      getSearch(keyworld);\r\n    }\r\n  }\r\n\r\n  function getKw(data) {\r\n    console.log(data);\r\n    setkeyworld(data);\r\n    getSearch(data);\r\n  }\r\n\r\n  function getSearch(keyworld) {\r\n    //发起搜索前保存历史记录\r\n    keyworld && setSearchHistory([...new Set([keyworld, ...searchHistory])]);\r\n    window\r\n      .axios(\r\n        \"https://api.kele8.cn/agent/https://app.vmovier.com/apiv3/search?kw=\" +\r\n          keyworld\r\n      )\r\n      .then((res) => {\r\n        console.log(res);\r\n        setSearch(res.data.data);\r\n      });\r\n  }\r\n\r\n  useEffect(() => {\r\n    autoFocusInst.current.focus();\r\n    getSearch();\r\n  }, []);\r\n  //监听keyworld变化时\r\n  useEffect(() => {\r\n    if (keyworld === \"\" && search) {\r\n      setSearch({ ...search, result: null });\r\n    }\r\n  }, [keyworld]);\r\n  //本地存储\r\n  useEffect(() => {\r\n    window.localStorage.setItem(\"SHI\", JSON.stringify(searchHistory));\r\n  }, [searchHistory]);\r\n  return (\r\n    <div className=\"search\">\r\n      {/* 搜索栏 */}\r\n      <div className=\"search_top\">\r\n        <div\r\n          style={{ backgroundColor: \"\", width: \"100vw\" }}\r\n          className=\"top_left\"\r\n        >\r\n          <Icon type=\"search\" size=\"sm\" color=\"rgb(131, 131, 131)\" />\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"请输入要搜索的内容\"\r\n            ref={autoFocusInst}\r\n            value={keyworld}\r\n            onChange={(e) => setkeyworld(e.target.value)}\r\n            onKeyPress={keyPressHandler}\r\n          />\r\n          {keyworld && (\r\n            <Icon\r\n              type=\"cross-circle\"\r\n              size=\"xxs\"\r\n              color=\"rgb(131,131,131)\"\r\n              onClick={() => setkeyworld(\"\")}\r\n            />\r\n          )}\r\n        </div>\r\n        <div\r\n          style={{ color: \"white\" }}\r\n          className=\"top_right\"\r\n          onClick={() => history.goBack()}\r\n        >\r\n          取消\r\n        </div>\r\n      </div>\r\n\r\n      <hr />\r\n\r\n      {search && search.result && keyworld && (\r\n        <section>\r\n          <div className=\"filter\">\r\n            <ul className=\"result\">\r\n              {search.result.list.map((item, index) => {\r\n                return <PostCard key={index} item={item} />;\r\n              })}\r\n            </ul>\r\n          </div>\r\n        </section>\r\n      )}\r\n\r\n      {/* 热门搜索 */}\r\n      {search && !search.result && (\r\n        <div className=\"search_hots\">\r\n          <span\r\n            style={{ marginBottom: \"15px\", display: \"block\", color: \"#787878\" }}\r\n          >\r\n            热门搜索\r\n          </span>\r\n          <SearchCard getKw={getKw} search={search}></SearchCard>\r\n        </div>\r\n      )}\r\n      {searchHistory && (\r\n        <div className=\"search_his\">\r\n          <span\r\n            style={{ marginBottom: \"15px\", display: \"block\", color: \"#787878\" }}\r\n          >\r\n            搜索记录\r\n          </span>\r\n          <div className=\"search_hot\">\r\n            {searchHistory.map((item, index) => (\r\n              <span key={index} onClick={() => getKw(item)}>\r\n                {item}\r\n              </span>\r\n            ))}\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react'\r\n\r\nexport default function Me() {\r\n    return (\r\n        <div>\r\n            \r\n        </div>\r\n    )\r\n}\r\n","import \"./App.css\";\nimport { useState } from \"react\";\n// 引入react-router-dom\nimport { Switch, Route, NavLink, Link, useLocation } from \"react-router-dom\";\n// 引入antd-mobile组件\nimport { NavBar, Icon, Modal } from \"antd-mobile\";\n// 引入css样式\nimport \"antd-mobile/dist/antd-mobile.css\";\nimport React from \"react\";\n// 引入axios\n// import axios from \"axios\";\n// 引入组件\nimport Home from \"./views/Home/Home\";\nimport Post from \"./views/Post/Post\";\nimport Cate from \"./views/Cate/Cate\";\nimport Search from \"./views/Search/Search\";\nimport Me from \"./views/Me/Me\";\n\nfunction App() {\n  const [modal, setModal] = useState(false);\n  const [dayCard, setdayCard] = useState(null);\n  //使用useLocation监听URL地址变化\n  const location = useLocation();\n  console.log(location);\n\n  function showModal(e) {\n    e.preventDefault(); // 修复 Android 上点击穿透\n    window.axios\n      .get(\"https://app.vmovier.com/apiv3/DayCover/getDayCover\")\n      .then((res) => {\n        setdayCard(res.data.data);\n      });\n    setModal(true);\n  }\n\n  function onClose() {\n    setModal(false);\n  }\n\n  return (\n    <div\n      className={\n        location.pathname.match(/(^\\/$|^\\/cate$|^\\/me$)/gi)\n          ? \"App shownav\"\n          : \"App\"\n      }\n    >\n      <NavBar\n        className=\"navbar\"\n        mode=\"dark\"\n        leftContent={<Icon type=\"down\" onClick={showModal} />}\n        rightContent={\n          <Link to=\"/search\">\n            <Icon type=\"search\" color=\"white\" />\n          </Link>\n        }\n      >\n        <nav className=\"navbar\">\n          <ul className=\"navlis\">\n            <li>\n              <NavLink to=\"/\" exact>\n                发现\n              </NavLink>\n            </li>\n            <li>\n              <NavLink to=\"/cate\">频道</NavLink>\n            </li>\n            <li>\n              <NavLink to=\"/me\">我的</NavLink>\n            </li>\n          </ul>\n        </nav>\n      </NavBar>\n      <div>\n        <Switch>\n          <Route path=\"/cate\">\n            <Cate></Cate>\n          </Route>\n          <Route path=\"/me\">\n            <Me></Me>\n          </Route>\n          <Route path=\"/post/:id\">\n            <Post></Post>\n          </Route>\n          <Route path=\"/search\">\n            <Search></Search>\n          </Route>\n          <Route path=\"/\">\n            <Home />\n          </Route>\n        </Switch>\n      </div>\n\n      <Modal\n        popup\n        visible={modal}\n        transparent={true}\n        style={{ height: \"100vh\", position: \"relative\" }}\n        maskClosable={true}\n        animationType=\"up\"\n      >\n        <div\n          className=\"modal_box\"\n          style={\n            {\n              // backgroundImage: \"url(day)\",\n            }\n          }\n        >\n          <div className=\"close\" onClick={onClose}>\n            X\n          </div>\n          {dayCard && (\n            <div className=\"msg_box\">\n              <div style={{ backgroundColor: \"black\", height: \"55vh\" }}>\n                <img src={dayCard.image} alt=\"\" />\n              </div>\n              <div\n                style={{\n                  backgroundColor: \"white\",\n                  height: \"30vh\",\n                  paddingTop: 60,\n                  color: \"black\",\n                }}\n              >\n                <p>{dayCard.content}</p>\n              </div>\n            </div>\n          )}\n        </div>\n      </Modal>\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { Toast } from \"antd-mobile\";\n//全局引用axiox，挂载到window上\nimport axios from \"axios\";\nimport { HashRouter as Router } from \"react-router-dom\";\nlet config = {\n  // baseURL: process.env.baseURL || process.env.apiUrl || \"\"\n  // timeout: 60 * 1000, // Timeout\n  // withCredentials: true, // Check cross-site Access-Control\n};\n\nconst _axios = axios.create(config);\n\n_axios.interceptors.request.use(\n  function (config) {\n    // Do something before request is sent\n    console.log(\"发送\"); //请求之前\n    //发送请求前触发 Loading效果\n    Toast.loading(\n      \"Loading...\",\n      30,\n      () => {\n        console.log(\"Load complete !!!\");\n      },\n      true\n    );\n    return config;\n  },\n  function (error) {\n    // Do something with request error\n    return Promise.reject(error);\n  }\n);\n\n// Add a response interceptor\n_axios.interceptors.response.use(\n  function (response) {\n    // Do something with response data\n    // 响应拦截器\n    console.log(\"成功\");\n    // 请求成功隐藏loading效果\n    Toast.hide();\n    return response;\n  },\n  function (error) {\n    // Do something with response error\n    console.log(\"失败\");\n    return Promise.reject(error);\n  }\n);\nwindow.axios = _axios;\n\nReactDOM.render(\n  // <React.StrictMode>\n  <Router>\n    <App />\n  </Router>,\n  // </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}